name: Variable Test
on: [push]

env:
  DAY_OF_WEEK: Monday

jobs:
  Test-Variables:
    name: 🎁 Test Variables
    runs-on: ubuntu-latest
    env:
      Greeting: Hello
    steps:
      - name: echo workflow env
        run: echo "workflow env = ${{env.DAY_OF_WEEK}}"
      - name: echo job env
        run: echo "job env = $Greeting"
      - name: echo repository variable
        run: echo "repository env = ${{vars.REPO_VAL}}"
      - name: echo undefined variable
        if: vars.UNDEF == ''
        run: echo "undefind variable $UNDEF"
  Test-Outputs:
    name: 🖼️ Output
    runs-on: ubuntu-latest
    outputs:
      first_step: ${{ steps.step1.outputs }}
      second_step: ${{ steps.step2.outputs }}
      third_step: ${{ steps.step3.outputs }}
    # Map a step output to a job output
    steps:
      - id: step1
        run: echo "FIRST STEP"
      - id: step2
        run: echo "SECOND STEP"
      - id: step3
        run: echo "THIRD ${{ steps.step2.outputs }}"
  Test-OutputsVariables:
    needs: Test-Outputs
    name: Test Output Variables
    runs-on: ubuntu-latest
    steps:
      - name: output first step
        run: echo ${{needs.Test-Outputs.outputs.first_step}}
      - name: output second step
        run: echo ${{needs.Test-Outputs.outputs.second_step}}
